<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Integrate OPENHAB2 | Theengs OpenMQTTGateway v1.8.0</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="apple-touch-icon" sizes="180x180" href=".apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <script type="module" src="https://unpkg.com/esp-web-tools@9.4.3/dist/web/install-button.js?module"></script>
    <meta name="description" content="One gateway, many technologies: MQTT gateway for ESP8266 or ESP32 with bidirectional 433mhz/315mhz/868mhz, Infrared communications, BLE, LoRa, beacons detection, mi flora / mi jia / LYWSD02/ Mi Scale compatibility, SMS &amp; LORA.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/favicon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.d60bac15.css" as="style"><link rel="preload" href="/assets/js/app.f837f19b.js" as="script"><link rel="preload" href="/assets/js/2.1486a66d.js" as="script"><link rel="preload" href="/assets/js/1.4ad45915.js" as="script"><link rel="preload" href="/assets/js/42.22a6564e.js" as="script"><link rel="prefetch" href="/assets/js/10.679d60ae.js"><link rel="prefetch" href="/assets/js/100.6c9de72a.js"><link rel="prefetch" href="/assets/js/101.cf23b52a.js"><link rel="prefetch" href="/assets/js/102.799e7f7d.js"><link rel="prefetch" href="/assets/js/103.fe8a4389.js"><link rel="prefetch" href="/assets/js/104.e3dfe83c.js"><link rel="prefetch" href="/assets/js/105.05b1f092.js"><link rel="prefetch" href="/assets/js/106.d0d1bfce.js"><link rel="prefetch" href="/assets/js/107.e18a51ed.js"><link rel="prefetch" href="/assets/js/108.f68bc055.js"><link rel="prefetch" href="/assets/js/109.d09a8d95.js"><link rel="prefetch" href="/assets/js/11.a0e96e5a.js"><link rel="prefetch" href="/assets/js/110.1ec8c36a.js"><link rel="prefetch" href="/assets/js/111.ba658c78.js"><link rel="prefetch" href="/assets/js/112.294eb4ae.js"><link rel="prefetch" href="/assets/js/113.4abefe09.js"><link rel="prefetch" href="/assets/js/114.9e7e0a24.js"><link rel="prefetch" href="/assets/js/115.d315d9c3.js"><link rel="prefetch" href="/assets/js/116.c9712cc5.js"><link rel="prefetch" href="/assets/js/117.bc7fe2e6.js"><link rel="prefetch" href="/assets/js/118.ba8786e0.js"><link rel="prefetch" href="/assets/js/119.7d350f55.js"><link rel="prefetch" href="/assets/js/12.3d501858.js"><link rel="prefetch" href="/assets/js/120.ab0bc866.js"><link rel="prefetch" href="/assets/js/121.0d7c83b0.js"><link rel="prefetch" href="/assets/js/122.0e6fbf9d.js"><link rel="prefetch" href="/assets/js/123.2e9d5a8c.js"><link rel="prefetch" href="/assets/js/124.95a09c6b.js"><link rel="prefetch" href="/assets/js/125.6c86696a.js"><link rel="prefetch" href="/assets/js/126.bc94a8fe.js"><link rel="prefetch" href="/assets/js/127.a5742dc8.js"><link rel="prefetch" href="/assets/js/128.28aaff15.js"><link rel="prefetch" href="/assets/js/129.f6b7e5ff.js"><link rel="prefetch" href="/assets/js/13.aa7cc538.js"><link rel="prefetch" href="/assets/js/130.a8ac813b.js"><link rel="prefetch" href="/assets/js/131.d357026c.js"><link rel="prefetch" href="/assets/js/132.b6c90de7.js"><link rel="prefetch" href="/assets/js/133.b9c5d093.js"><link rel="prefetch" href="/assets/js/134.b07eb44d.js"><link rel="prefetch" href="/assets/js/135.030d46e1.js"><link rel="prefetch" href="/assets/js/136.46df54bb.js"><link rel="prefetch" href="/assets/js/137.8915a3ed.js"><link rel="prefetch" href="/assets/js/138.1b480ea8.js"><link rel="prefetch" href="/assets/js/139.7613b89d.js"><link rel="prefetch" href="/assets/js/14.d4097d38.js"><link rel="prefetch" href="/assets/js/140.b1657685.js"><link rel="prefetch" href="/assets/js/141.94c44889.js"><link rel="prefetch" href="/assets/js/142.dfecb355.js"><link rel="prefetch" href="/assets/js/15.0dfffdbd.js"><link rel="prefetch" href="/assets/js/16.ec9594f5.js"><link rel="prefetch" href="/assets/js/17.608bee5e.js"><link rel="prefetch" href="/assets/js/18.9e31d1bc.js"><link rel="prefetch" href="/assets/js/19.7c603986.js"><link rel="prefetch" href="/assets/js/20.b2e40f1b.js"><link rel="prefetch" href="/assets/js/21.7b107266.js"><link rel="prefetch" href="/assets/js/22.1fa11360.js"><link rel="prefetch" href="/assets/js/23.d5ff69ee.js"><link rel="prefetch" href="/assets/js/24.4273fd19.js"><link rel="prefetch" href="/assets/js/25.3cdd6711.js"><link rel="prefetch" href="/assets/js/26.a1bfb6b4.js"><link rel="prefetch" href="/assets/js/27.58faa6bb.js"><link rel="prefetch" href="/assets/js/28.876af64b.js"><link rel="prefetch" href="/assets/js/29.df241652.js"><link rel="prefetch" href="/assets/js/3.2fb8cc22.js"><link rel="prefetch" href="/assets/js/30.02e9602c.js"><link rel="prefetch" href="/assets/js/31.7ec0b927.js"><link rel="prefetch" href="/assets/js/32.bf6ed2d3.js"><link rel="prefetch" href="/assets/js/33.26d560c8.js"><link rel="prefetch" href="/assets/js/34.c87f68f5.js"><link rel="prefetch" href="/assets/js/35.18554129.js"><link rel="prefetch" href="/assets/js/36.f557ac44.js"><link rel="prefetch" href="/assets/js/37.43d9e741.js"><link rel="prefetch" href="/assets/js/38.a49da124.js"><link rel="prefetch" href="/assets/js/39.96ef8bda.js"><link rel="prefetch" href="/assets/js/4.2a2fed8f.js"><link rel="prefetch" href="/assets/js/40.1255e9bb.js"><link rel="prefetch" href="/assets/js/41.c56bed06.js"><link rel="prefetch" href="/assets/js/43.e234c01e.js"><link rel="prefetch" href="/assets/js/44.326a92a4.js"><link rel="prefetch" href="/assets/js/45.8034df12.js"><link rel="prefetch" href="/assets/js/46.5eb4ec32.js"><link rel="prefetch" href="/assets/js/47.0d1f0458.js"><link rel="prefetch" href="/assets/js/48.fbb11cfa.js"><link rel="prefetch" href="/assets/js/49.0ac9353c.js"><link rel="prefetch" href="/assets/js/5.e28032c6.js"><link rel="prefetch" href="/assets/js/50.3242e372.js"><link rel="prefetch" href="/assets/js/51.c9fbf19a.js"><link rel="prefetch" href="/assets/js/52.5747715a.js"><link rel="prefetch" href="/assets/js/53.080ac1a5.js"><link rel="prefetch" href="/assets/js/54.b4aa04b9.js"><link rel="prefetch" href="/assets/js/55.3d54439e.js"><link rel="prefetch" href="/assets/js/56.23aa37ff.js"><link rel="prefetch" href="/assets/js/57.d9dc58a1.js"><link rel="prefetch" href="/assets/js/58.c3ccaf76.js"><link rel="prefetch" href="/assets/js/59.7acaa7ed.js"><link rel="prefetch" href="/assets/js/6.641c06fe.js"><link rel="prefetch" href="/assets/js/60.808d0e07.js"><link rel="prefetch" href="/assets/js/61.ebb384a5.js"><link rel="prefetch" href="/assets/js/62.e0809188.js"><link rel="prefetch" href="/assets/js/63.564bb785.js"><link rel="prefetch" href="/assets/js/64.7b220333.js"><link rel="prefetch" href="/assets/js/65.4a957a69.js"><link rel="prefetch" href="/assets/js/66.199b8078.js"><link rel="prefetch" href="/assets/js/67.a3ca1b26.js"><link rel="prefetch" href="/assets/js/68.9f13a26f.js"><link rel="prefetch" href="/assets/js/69.48e7a551.js"><link rel="prefetch" href="/assets/js/7.dafeb66f.js"><link rel="prefetch" href="/assets/js/70.183092c4.js"><link rel="prefetch" href="/assets/js/71.dc783a10.js"><link rel="prefetch" href="/assets/js/72.5837a359.js"><link rel="prefetch" href="/assets/js/73.acbbe34f.js"><link rel="prefetch" href="/assets/js/74.a11bfcb6.js"><link rel="prefetch" href="/assets/js/75.3520eab2.js"><link rel="prefetch" href="/assets/js/76.1cfdeb8a.js"><link rel="prefetch" href="/assets/js/77.f5bd2c0f.js"><link rel="prefetch" href="/assets/js/78.f2a2bb7c.js"><link rel="prefetch" href="/assets/js/79.8e3335a9.js"><link rel="prefetch" href="/assets/js/80.ba98eec9.js"><link rel="prefetch" href="/assets/js/81.a09455a6.js"><link rel="prefetch" href="/assets/js/82.b640103a.js"><link rel="prefetch" href="/assets/js/83.27706e4c.js"><link rel="prefetch" href="/assets/js/84.c782543e.js"><link rel="prefetch" href="/assets/js/85.b13ad98e.js"><link rel="prefetch" href="/assets/js/86.983b9dac.js"><link rel="prefetch" href="/assets/js/87.30b22b3d.js"><link rel="prefetch" href="/assets/js/88.d7f20abf.js"><link rel="prefetch" href="/assets/js/89.67dfd670.js"><link rel="prefetch" href="/assets/js/90.53fba60f.js"><link rel="prefetch" href="/assets/js/91.dc2e9665.js"><link rel="prefetch" href="/assets/js/92.9adbbdb6.js"><link rel="prefetch" href="/assets/js/93.1df335f2.js"><link rel="prefetch" href="/assets/js/94.7d7f8314.js"><link rel="prefetch" href="/assets/js/95.180e554f.js"><link rel="prefetch" href="/assets/js/96.e538d163.js"><link rel="prefetch" href="/assets/js/97.5ee5ef36.js"><link rel="prefetch" href="/assets/js/98.563eba4b.js"><link rel="prefetch" href="/assets/js/99.8dd0b4c6.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.fc117b08.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d60bac15.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Theengs OpenMQTTGateway v1.8.0</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://www.theengs.io" target="_self" class="nav-link external">
  Home
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Use cases" class="dropdown-title"><span class="title">Use cases</span> <span class="arrow down"></span></button> <button type="button" aria-label="Use cases" class="mobile-dropdown-title"><span class="title">Use cases</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.theengs.io/usecases/smarthome.html" target="_self" class="nav-link external">
  Smart Home
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://www.theengs.io/usecases/iot.html" target="_self" class="nav-link external">
  IoT
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://www.theengs.io/usecases/research.html" target="_self" class="nav-link external">
  Research
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Solutions" class="dropdown-title"><span class="title">Solutions</span> <span class="arrow down"></span></button> <button type="button" aria-label="Solutions" class="mobile-dropdown-title"><span class="title">Solutions</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Hardware
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://shop.theengs.io/products/theengs-plug-smart-plug-ble-gateway-and-energy-consumption" target="_self" class="nav-link external">
  Theengs Plug
  <!----></a></li><li class="dropdown-subitem"><a href="https://shop.theengs.io/products/theengs-bridge-esp32-ble-mqtt-gateway-with-ethernet-and-external-antenna" target="_self" class="nav-link external">
  Theengs Bridge
  <!----></a></li></ul></li><li class="dropdown-item"><h4>
          Software
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://app.theengs.io" target="_self" class="nav-link external">
  Mobile App
  <!----></a></li><li class="dropdown-subitem"><a href="https://docs.openmqttgateway.com" target="_self" class="nav-link external">
  OpenMQTTGateway
  <!----></a></li><li class="dropdown-subitem"><a href="https://gateway.theengs.io" target="_self" class="nav-link external">
  Gateway
  <!----></a></li></ul></li><li class="dropdown-item"><h4>
          Core
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://decoder.theengs.io" target="_self" class="nav-link external">
  Decoder
  <!----></a></li><li class="dropdown-subitem"><a href="https://parser.theengs.io" target="_self" class="nav-link external">
  Web Parser
  <!----></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://decoder.theengs.io/devices/devices.html" target="_self" class="nav-link external">
  Compatible devices
  <!----></a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://shop.theengs.io/" target="_self" class="nav-link external">
  Shop
  <!----></a></div><div class="nav-item"><a href="https://github.com/sponsors/theengs" target="_self" class="nav-link external">
  Sponsor 🤍
  <!----></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://www.theengs.io" target="_self" class="nav-link external">
  Home
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Use cases" class="dropdown-title"><span class="title">Use cases</span> <span class="arrow down"></span></button> <button type="button" aria-label="Use cases" class="mobile-dropdown-title"><span class="title">Use cases</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.theengs.io/usecases/smarthome.html" target="_self" class="nav-link external">
  Smart Home
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://www.theengs.io/usecases/iot.html" target="_self" class="nav-link external">
  IoT
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://www.theengs.io/usecases/research.html" target="_self" class="nav-link external">
  Research
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Solutions" class="dropdown-title"><span class="title">Solutions</span> <span class="arrow down"></span></button> <button type="button" aria-label="Solutions" class="mobile-dropdown-title"><span class="title">Solutions</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Hardware
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://shop.theengs.io/products/theengs-plug-smart-plug-ble-gateway-and-energy-consumption" target="_self" class="nav-link external">
  Theengs Plug
  <!----></a></li><li class="dropdown-subitem"><a href="https://shop.theengs.io/products/theengs-bridge-esp32-ble-mqtt-gateway-with-ethernet-and-external-antenna" target="_self" class="nav-link external">
  Theengs Bridge
  <!----></a></li></ul></li><li class="dropdown-item"><h4>
          Software
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://app.theengs.io" target="_self" class="nav-link external">
  Mobile App
  <!----></a></li><li class="dropdown-subitem"><a href="https://docs.openmqttgateway.com" target="_self" class="nav-link external">
  OpenMQTTGateway
  <!----></a></li><li class="dropdown-subitem"><a href="https://gateway.theengs.io" target="_self" class="nav-link external">
  Gateway
  <!----></a></li></ul></li><li class="dropdown-item"><h4>
          Core
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://decoder.theengs.io" target="_self" class="nav-link external">
  Decoder
  <!----></a></li><li class="dropdown-subitem"><a href="https://parser.theengs.io" target="_self" class="nav-link external">
  Web Parser
  <!----></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://decoder.theengs.io/devices/devices.html" target="_self" class="nav-link external">
  Compatible devices
  <!----></a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://shop.theengs.io/" target="_self" class="nav-link external">
  Shop
  <!----></a></div><div class="nav-item"><a href="https://github.com/sponsors/theengs" target="_self" class="nav-link external">
  Sponsor 🤍
  <!----></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">0 - What is it for 🏠</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1 - Prerequisites🧭</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2 - Set it up 🔨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3 - Upload ➡️</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4 - Use ✈️</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>5 - Integrate 🎉</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/integrate/openhab2.html" aria-current="page" class="active sidebar-link">Integrate OPENHAB2</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/integrate/openhab2.html#auto-discovery-through-home-assistant-convention" class="sidebar-link">Auto discovery through home assistant convention</a></li><li class="sidebar-sub-header"><a href="/integrate/openhab2.html#mqtt-2-manual-setup-openhab2-4" class="sidebar-link">MQTT 2 manual setup &gt;=Openhab2.4</a></li><li class="sidebar-sub-header"><a href="/integrate/openhab2.html#for-a-mi-flora-or-mi-jia-temperature" class="sidebar-link">For a mi flora or mi jia temperature :</a></li><li class="sidebar-sub-header"><a href="/integrate/openhab2.html#for-a-switch-channel-add-a-channel-by-choosing-the-type-on-off-switch" class="sidebar-link">For a switch channel, add a channel by choosing the type &quot;On/Off switch&quot;</a></li></ul></li><li><a href="/integrate/openhab3.html" class="sidebar-link">Integrate OPENHAB 3/4</a></li><li><a href="/integrate/home_assistant.html" class="sidebar-link">Integrate Home Assistant</a></li><li><a href="/integrate/node_red.html" class="sidebar-link">Integrate Node-Red</a></li><li><a href="/integrate/aws_iot.html" class="sidebar-link">Integrate AWS IOT</a></li><li><a href="/integrate/jeedom.html" class="sidebar-link">Integrate Jeedom</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6 - Participate 💻</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="integrate-openhab2"><a href="#integrate-openhab2" class="header-anchor">#</a> Integrate OPENHAB2</h1> <h2 id="auto-discovery-through-home-assistant-convention"><a href="#auto-discovery-through-home-assistant-convention" class="header-anchor">#</a> Auto discovery through home assistant convention</h2> <p>OpenMQTTGateway support autodiscovery of things for OpenHAB 2.4, so as to do that it rely on home assistant auto discovery convention.
So as to use the autodiscovery function you need to have:</p> <ul><li>The Jinga transformation addon installed</li> <li>The Json transformation addon installed</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If you are connecting to BLE devices it is highly recommended to set <code>filterConnectable</code> to <code>true</code> in <a href="/use/ble.html#advanced-filter-out-connectable-devices">BT configuration</a>. Otherwise you may encounter incomplete data.</p></div> <p>The things will appear in the inbox of the paperUI, add them and links the channels. You should see them into the control panel for further usage.
<img src="/assets/img/OpenMQTTgateway_OpenHAB_Control.d6c2beb5.png" alt="OpenHAB integration"></p> <h2 id="mqtt-2-manual-setup-openhab2-4"><a href="#mqtt-2-manual-setup-openhab2-4" class="header-anchor">#</a> MQTT 2 manual setup &gt;=Openhab2.4</h2> <p>You should have an MQTT broker installed (either mosquitto or the OpenHAB2 embedded one)</p> <p>In paper UI</p> <ul><li>In bindings add the MQTT Things binding</li> <li>Inbox &gt; MQTT Things binding &gt; Add manually &gt;MQTT Broker : configure your broker</li> <li>Inbox &gt; MQTT Things binding &gt; Add manually &gt;Generic MQTT Thing : select your previously configured broker as a bridge and enter your thing definition (example RF plug, weather station, PIR sensor)</li> <li>Configuration &gt; Things &gt; &quot;Your thing&quot; : click on + and add one channel for each thing parameter (example for a weather station, you will have one channel for the temperature, one channel for the humidity etc..)</li> <li>For a state channel define the MQTT topic like this:</li></ul> <h2 id="for-a-mi-flora-or-mi-jia-temperature"><a href="#for-a-mi-flora-or-mi-jia-temperature" class="header-anchor">#</a> For a mi flora or mi jia temperature :</h2> <p><code>home/+/BTtoMQTT/C47C9999D1B8</code></p> <ul><li><p>Click on show more</p></li> <li><p>And add in &quot;Incoming values transformation&quot;</p></li></ul> <p><code>JSONPATH:$.tem</code></p> <ul><li><p>Click on Save</p></li> <li><p>Repeat for each channels and each things</p></li> <li><p>Configuration &gt; Things &gt; &quot;Your thing&quot; : click on a channel and add 1 or several items per channel defining what you want to display in the sitemap
or</p></li> <li><p>Define your items in an item file like this by referring to your MQTT things channels:
For a mi flora and mi jia</p></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// MI JIA</span>
<span class="token class-name">Number</span> humidity		<span class="token string">&quot;Humidité air[%.1f %%]&quot;</span> <span class="token generics"><span class="token punctuation">&lt;</span>water<span class="token punctuation">&gt;</span></span>		    <span class="token punctuation">{</span>channel<span class="token operator">=</span><span class="token string">&quot;mqtt:topic:dc2222e6:humidite-mijia&quot;</span><span class="token punctuation">}</span>
<span class="token class-name">Number</span> temperature 	<span class="token string">&quot;Température[%.1f °C]&quot;</span>  <span class="token generics"><span class="token punctuation">&lt;</span>temperature<span class="token punctuation">&gt;</span></span>	    <span class="token punctuation">{</span>channel<span class="token operator">=</span><span class="token string">&quot;mqtt:topic:dc2222e6:temperature-mijia&quot;</span><span class="token punctuation">}</span>
<span class="token class-name">Number</span> battery   	<span class="token string">&quot;Batterie capteur[%.1f %]&quot;</span><span class="token generics"><span class="token punctuation">&lt;</span>volt<span class="token punctuation">&gt;</span></span>	    <span class="token punctuation">{</span>channel<span class="token operator">=</span><span class="token string">&quot;mqtt:topic:dc2222e6:batterie-mijia&quot;</span><span class="token punctuation">}</span>

<span class="token comment">// MI FLORA</span>
<span class="token class-name">Number</span> humidity_P	<span class="token string">&quot;Hygrométrie plante[%.1f %%]&quot;</span> <span class="token generics"><span class="token punctuation">&lt;</span>water<span class="token punctuation">&gt;</span></span>	    <span class="token punctuation">{</span>channel<span class="token operator">=</span><span class="token string">&quot;mqtt:topic:1fb33334:humidite-miflora&quot;</span><span class="token punctuation">}</span>
<span class="token class-name">Number</span> temperature_P 	<span class="token string">&quot;Température plante[%.1f °C]&quot;</span> <span class="token generics"><span class="token punctuation">&lt;</span>temperature<span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>channel<span class="token operator">=</span><span class="token string">&quot;mqtt:topic:1fb33334:temperature-miflora&quot;</span><span class="token punctuation">}</span>
<span class="token class-name">Number</span> fertility_P	<span class="token string">&quot;Fertilité plante[%.1f uS/cm]&quot;</span> 	            <span class="token punctuation">{</span>channel<span class="token operator">=</span><span class="token string">&quot;mqtt:topic:1fb33334:fertilite-miflora&quot;</span><span class="token punctuation">}</span>
<span class="token class-name">Number</span> lux_P		<span class="token string">&quot;Luminiosité plante[%.1f lux]&quot;</span>              <span class="token punctuation">{</span>channel<span class="token operator">=</span><span class="token string">&quot;mqtt:topic:1fb33334:lux-miflora&quot;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="for-a-switch-channel-add-a-channel-by-choosing-the-type-on-off-switch"><a href="#for-a-switch-channel-add-a-channel-by-choosing-the-type-on-off-switch" class="header-anchor">#</a> For a switch channel, add a channel by choosing the type &quot;On/Off switch&quot;</h2> <p>define the MQTT state topic like this:
<code>home/+/433toMQTT</code></p> <ul><li><p>Click on show more</p></li> <li><p>add in &quot;Incoming values transformation&quot;
<code>JSONPATH:$.value</code></p></li> <li><p>define the command topic like this:
<code>home/+/commands/MQTTto433</code></p></li> <li><p>add the value corresponding to ON state and to OFF state
1312081
1312084</p></li> <li><p>Click on Save</p></li> <li><p>Repeat for each channels and each things</p></li> <li><p>Configuration &gt; Things &gt; &quot;Your thing&quot; : click on a channel and add 1 or several switch per channel
or</p></li> <li><p>Define your items in an item file like this by referring to your MQTT thing channel:</p></li></ul> <p><code>Switch OMGSwitch &quot;Prise 1&quot; &lt;poweroutlet&gt; {channel=&quot;mqtt:topic:08998877:Power1&quot;}</code></p> <h1 id="presence-detection-from-rickitaly"><a href="#presence-detection-from-rickitaly" class="header-anchor">#</a> Presence detection (from @rickitaly)</h1> <p>in thing file:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Thing</span> mqtt<span class="token operator">:</span>topic<span class="token operator">:</span>omgentrance <span class="token punctuation">(</span>mqtt<span class="token operator">:</span>broker<span class="token operator">:</span>localBroker<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token class-name">Channels</span><span class="token operator">:</span>
    <span class="token class-name">Type</span> string <span class="token operator">:</span> blepresence <span class="token string">&quot;People Presence&quot;</span>  <span class="token punctuation">[</span> stateTopic<span class="token operator">=</span><span class="token string">&quot;home/home_presence/OpenMQTTGatewayEntrance&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>in item file</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> <span class="token class-name">OMG_BLE_Entrance</span> <span class="token string">&quot;BLE Entrance Detector&quot;</span> <span class="token punctuation">{</span> channel<span class="token operator">=</span><span class="token string">&quot;mqtt:topic:omgentrance:blepresence&quot;</span> <span class="token punctuation">}</span>
<span class="token class-name">Switch</span>   <span class="token class-name">Presence_Keys_Rick</span>      <span class="token string">&quot;Rick's Keys&quot;</span>       <span class="token generics"><span class="token punctuation">&lt;</span>keyring<span class="token punctuation">&gt;</span></span>      <span class="token punctuation">(</span><span class="token class-name">People</span><span class="token punctuation">,</span> gKeys<span class="token punctuation">)</span>        <span class="token punctuation">{</span>expire<span class="token operator">=</span><span class="token string">&quot;240s,OFF&quot;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>In rule file:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>rule <span class="token string">&quot;BLE Presence Detector&quot;</span>
when
<span class="token class-name">Item</span> <span class="token class-name">OMG_BLE_Entrance</span> received update
then
val <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">OMG_BLE_Entrance</span><span class="token punctuation">.</span>state as <span class="token class-name">StringType</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toString
val <span class="token class-name">String</span> id  <span class="token operator">=</span> <span class="token function">transform</span><span class="token punctuation">(</span><span class="token string">&quot;JSONPATH&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;$.id&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">.</span>toString
<span class="token keyword">if</span><span class="token punctuation">(</span>id <span class="token operator">==</span> <span class="token string">&quot;xx:xx:xx:xx:xx:xx&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Presence_Keys_Rick</span><span class="token punctuation">.</span><span class="token function">postUpdate</span><span class="token punctuation">(</span><span class="token constant">ON</span><span class="token punctuation">)</span>
end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/1technophile/OpenMQTTGateway/edit/development/docs/integrate/openhab2.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/15/2024, 4:37:20 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/use/webui.html" class="prev">
        WebUI
      </a></span> <span class="next"><a href="/integrate/openhab3.html">
        Integrate OPENHAB 3/4
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f837f19b.js" defer></script><script src="/assets/js/2.1486a66d.js" defer></script><script src="/assets/js/1.4ad45915.js" defer></script><script src="/assets/js/42.22a6564e.js" defer></script>
  </body>
</html>
